# Class design in UML

##### Представляю первичный код [дизайна](../uml/LibraryService.puml) классов в соответствии с [заданием](../uml/task2.md).
##### Визуализация в [png](../uml/LibraryService.png).

### Основные моменты:
* Контроллеры и сервисы разделены по ответственности. По принципу работы с соответствующей доменной сущностью.
* В контроллерах выделены интерфейсы для отделения логики Swagger.
* В сервисах интерфейсы выделены как для надлежащего проксирования в среде Spring, так и для логического объединения сходных сервисов.
* Слоистая структура пакетов: controller, service и т.п.
* Репозитории также разделены по ответственности для работы с соответствующей сущностью.
* По бизнес-логике:
  * Наследование сущностей позволяет эффективно дополнять новыми.
  * Наличие статуса у прокатываемой единицы позволяет контролировать их состояние.
  * Наличие UUID, а не только ISBN у книги позволяет учитывать несколько экземпляров одного и того издания. Аналогично - dvd.
  * Соответствующие связи между сущностями Rent, User, Book и RentStatus позволяют эффективно вести учет проката, уведомлять и т.п.
* Масштабируемость:
  * База данных Postgres поставляется в отдельном инстансе, которые возможно масштабировать с ростом нагрузки.
  * Так же как и сам сервис библиотеки - возможно реплицировать средствами k8s например.
  * Изолированные сервисы, контроллеры, а также слоистая структура позволит безболезненно разделить данный монолит на микросервисную структуру. Например, внедрив api-gateway в качестве применения паттерна "душитель" для фазы перехода. 
* В логику методов не вдавался для первого наброска. Также пакеты config, handler только обозначил для конфигурации соответственно и обработки исключительных ситуаций.
* Аутентификация, работа с токенами тоже схематично.